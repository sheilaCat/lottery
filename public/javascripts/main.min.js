function init(){window.DeviceMotionEvent?window.addEventListener("devicemotion",deviceMotionHandler,!1):alert("not support mobile event")}function deviceMotionHandler(t){var e=t.accelerationIncludingGravity,n=(new Date).getTime();if(n-last_update>100){var a=n-last_update;last_update=n,x=e.x,y=e.y,z=e.z;var o=Math.abs(x+y+z-last_x-last_y-last_z)/a*1e4;if(o>SHAKE_THRESHOLD){lottery.length=0,$("#options>span").removeClass("active");for(var i={},s=0;4>s;s++){var c=Math.floor(11*Math.random()+1);null==i[c]?(lottery.push(c),$("#options>span:eq("+(c-1)+")").addClass("active"),i[c]="1"):s--,$('button[type="submit"]').removeAttr("disabled"),$("nav>ul>li").removeClass("active"),$("nav>ul>li:eq(3)").addClass("active")}last_x=x,last_y=y,last_z=z}}}function swipeUp(){$("p.pullDown").html('下拉历史开奖<i class="iconfont">&#xe609;</i>'),$("footer > p").html("猜中任意三个开奖号码，单注奖<strong>26元</strong>，再加奖<strong>4元</strong>"),$("#content").animate({top:$("nav").height()+1}),$("#bonusPot").empty(),$("nav>ul>li>a>i").css("visibility","visible")}function swipeDown(){function t(){$("#tips").fadeOut("fast")}$.ajax({type:"GET",url:"/open",data:"winning",cache:!0,success:function(t){var e=t.winning;for(var n in e){var a="<span>"+e[n].openNum+"</span>",o="<p>"+a+e[n].numbers+"</p>";$("#bonusPot").append(o)}}});var e,n=$("#content").height();$("#bonusPot").height(n+50),e=$(window).scrollTop(),$(window).scrollTop(500),$("#content").animate({top:"340px"}),$("p.pullDown").html('上滑收起<i class="iconfont">&#xe61f;</i>'),$("footer > p").html("至少选2个球，猜中任意2个，中13元"),$("#tips").css("display","block"),setTimeout(t,1e3),$("nav>ul>li>a>i").css("visibility","hidden")}function touchSatrtFunc(t){try{var e=t.touches[0],n=Number(e.pageX),a=Number(e.pageY);startX=n,startY=a}catch(o){alert("touchSatrtFunc："+o.message)}}function touchMoveFunc(t){try{var e=t.touches[0];x=Number(e.pageX),y=Number(e.pageY)}catch(n){alert("touchMoveFunc："+n.message)}}function touchEndFunc(t){try{y-startY>100&&0===orientation?(orientation=1,swipeDown()):y-startY<-100&&1===orientation&&(orientation=0,swipeUp())}catch(e){alert("touchEndFunc："+e.message)}}function isTouchDevice(){try{document.createEvent("TouchEvent"),bindEvent()}catch(t){alert("不支持TouchEvent事件！"+t.message)}}init();var SHAKE_THRESHOLD=3e3,last_update=0,x=y=z=last_x=last_y=last_z=0,lottery=new Array;$(document).on("click","#options>span",function(){$(this).toggleClass("active"),$(this).hasClass("active")?lottery.push($(this).html()):lottery.pop();var t=$("#options>span.active").size();$("nav>ul>li").removeClass("active"),1===t?($("nav>ul>li:eq(0)").addClass("active"),$('button[type="submit"]').attr("disabled","disabled")):2===t?($("nav>ul>li:eq(1)").addClass("active"),$('button[type="submit"]').removeAttr("disabled")):3===t?$("nav>ul>li:eq(2)").addClass("active"):4===t?$("nav>ul>li:eq(3)").addClass("active"):$("nav>ul>li:eq(0)").addClass("active")}),$(document).on("click",'button[type="submit"]',function(){$.post("/submit",lottery,function(){alert("成功购买彩票"+lottery)},"json")});var computeTime=function(){var t,e=new Date,n=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds();t=e.getHours()<20?72e3-n:86400-n+72e3;var a=Math.floor(t/60/60),o=Math.floor((t-60*a*60)/60),i=t-60*a*60-60*o;10>i&&(i="0"+i),10>o&&(o="0"+o),10>a&&(a="0"+a);var s=a+":"+o+":"+i;$("#timeRemain > p > strong").html(s)};setInterval(computeTime,1e3),document.addEventListener("touchmove",function(t){t.preventDefault()},!1);var x,y,orientation=0;document.addEventListener("touchstart",touchSatrtFunc,!1),document.addEventListener("touchmove",touchMoveFunc,!1),document.addEventListener("touchend",touchEndFunc,!1);